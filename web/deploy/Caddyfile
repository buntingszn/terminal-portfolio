# Terminal Portfolio - Static Site
# Usage: import this snippet in your main Caddyfile
#
# Example:
#   kpm.fyi {
#     import /path/to/web/deploy/Caddyfile
#   }

root * /var/www/terminal-portfolio
file_server

# Gzip and Brotli compression
encode gzip zstd

# Hashed assets - immutable cache
@hashedAssets path /_astro/*
header @hashedAssets Cache-Control "public, max-age=31536000, immutable"

# Font files - long cache
@fonts path /fonts/*
header @fonts Cache-Control "public, max-age=31536000, immutable"

# HTML pages - short cache for updates
@html path *.html
header @html Cache-Control "public, max-age=3600, must-revalidate"

# 404 handling
handle_errors {
  rewrite * /404.html
  file_server
}
